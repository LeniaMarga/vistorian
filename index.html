<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8" content="X-Content-Type-Options=nosniff"/>
    <title>networkcube</title>
    <link rel="stylesheet" href="styles.css" type="text/css" />
    <!-- Needs to be replaced by pointer to final 'lib/networkcube.js' -->
    <script src="lib/jquery.js"></script>
    <script src="./core/networkcube.js"></script>
    <script src="lib/papaparse.js"></script>
</head>
<body>
    <div id="main">
    <p id="sessId" style="display:none"/>

      <h1>networkcube</h1>

      <div id="upload">
          <!-- Node table: <input id="nodeTableUpload" type="file" name="file"/></br></br> -->
          Edge table: <input id="edgeTableUpload" type="file" name="file"/></br>
          <output id="filelist"></output>
          <a id="dataviewlink" style="display:none">Upload</a>
      </div>
   </div>
   <div id="footer">
       <p>Page and visualizations build with:
           <a href="jQuery.com">jQuery</a> |
           <a href="www.d3.org">D3</a>
           <div>Icons made by <a href="http://www.flaticon.com/authors/robin-kylander" title="Robin Kylander">Robin Kylander</a> from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a>             is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0">CC BY 3.0</a></div>
       </p>
   </div>

   <div>Icons made by <a href="http://www.flaticon.com/authors/vectorgraphit" title="Vectorgraphit">Vectorgraphit</a> from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a>             is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0">CC BY 3.0</a></div>


   <script>

    // create some dummy data in UTF-8 CSV
    var nodetable = '0,Bob\n1,Allan\n2,Anna\n3,Emma\n4,Coby'
    var edgetable = '0,0,1,0,1\n0,0,1,1,2\n0,0,1,2,3\n0, 0, 1, 3, 4\n1, 1, 4, 0, 2\n1, 1, 4, 1, 3\n1, 1, 4, 2, 1\n1, 1, 4, 3, 2\n2, 2, 3, 0, 1\n2, 2, 3, 1, 2\n2, 2, 3, 2, 1\n2, 2, 3, 3, 1\n3, 3, 4, 0, 3\n3, 3, 4, 1, 3\n3, 3, 4, 2, 2\n3, 3, 4, 3, 2';



    // create data object
    var data = {name:'testdata',
                nodeTable: Papa.parse(nodetable).data,
                edgeTable: Papa.parse(edgetable).data,
                nodeSchema: networkcube.getDefaultNodeSchema(),
                edgeSchema: networkcube.getDefaultEdgeSchema()
            }

    // import data
    networkcube.importData('testsession', data)

    // create tab
    networkcube.createVisualizationWindow('testsession', 'Matrix', data.name)





   // var vis;
   // var SESSION_NAME = Date.now() + '_' + Math.random();
   // $('#quickstartlink').attr('href', 'dataview.html?s=' + SESSION_NAME)
   //
   // var files = []  // files the user uploaded
   // var fileContents = []
   // var readers = []
   // var loadCount = 0;
   //
   // //
   // // document.getElementById('nodeTableUpload').addEventListener('change', uploadNodeTable, false);
   //  document.getElementById('edgeTableUpload').addEventListener('change', uploadEdgeTable);
   //  // document.addEventListener('onload', uploadEdgeTable);
   //
   //
   //  if(window.File){
   //      console.log('File supported')
   //  }

    // var edgeTable = , nodeTable
    //
    // function uploadEdgeTable(e) {
    //
    //     f = e.target.files[0]; // FileList object
    //
    //     var output = [];
    //     if(f.name.split('.')[1] != 'csv'){
    //         output.push('<li style="color:#f00;"><strong>', escape(f.name), '</strong> is not a CSV file.</li>');
    //     }else{
    //         output.push('<li><strong>',escape(f.name), '</strong> (', f.type || 'n/a', ') - ', f.size, ' bytes, last modified: ', f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a', '</li>');
    //         var reader = new FileReader();
    //         reader.filename = f.name;
    //         reader.onload = function(f){
    //             var obj ={}
    //             var str = f.target.result;
    //
    //             networkcube.importEdgeTable(Papa.parse(str).data, f.target.filename.split('.')[0])
    //         }
    //         reader.readAsText(f)
    //     }
    //     document.getElementById('filelist').innerHTML = '<ul>' + output.join('') + '</ul>';
    // }


   // function showDataFormat(visualization){
   //     vis = visualization
   //     $('.dataformat').attr('style', 'display:none')
   //     $('.dataformat.'+visualization).attr('style', 'display:block')
   // }
   </script>
</body>
</html>

{"version":3,"sources":["dynamicego.ts"],"names":[],"mappings":"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","file":"dynamicego.js","sourcesContent":["/// <reference path=\"../../core/networkcube.d.ts\"/>\n/// <reference path=\"../widgets/widgets.d.ts\" />\n\n\n// DATA\nvar dgraph: networkcube.DynamicGraph = networkcube.getDynamicGraph();\nnetworkcube.setDefaultEventListener(updateEventHandler);\nnetworkcube.addEventListener('timeRange', timeRangeHandler);\n\n\nvar nodes = dgraph.nodes().toArray();\nvar links = dgraph.links().toArray();\nvar times = dgraph.times().toArray();\nvar linkTypes = dgraph.links().linkTypes();\n\n// VIS PARAMETERS\nvar WIDTH = window.innerWidth;\nvar TABLE_LEFT = 200\nvar TABLE_RIGHT = 100\nvar ROW_HEIGHT = 11;\nvar COL_WIDTH = 10;\nvar LINK_OPACITY= .1\nvar TABLE_TOP = 100;\nvar LINK_ANCHOR_RADIUS = 2;\nvar NODE_LABEL_COLOR = '#777'\nvar NODE_LABEL_WEIGHT = 100\nvar LABEL_ORDER\nvar CIRCLE_SEGMENTS = 20;\nvar ANCHOR_START_DIAMETER = 2;\nvar ANCHOR_END_DIAMETER = 3;\nvar SCROLL_CHUNK = 2;\nvar TIME_TICK_GAP_MAX = 8;\n\n\n\n\n// VIS ELEMENTS\nvar svg;\nvar nodeYPosFunction = d3.scale.linear();\nvar timeXFunction = d3.scale.linear();\nvar linkTypeOffset = d3.scale.linear().range([0,ROW_HEIGHT]);\nvar bar;\nvar nodeLabels\nvar row\nvar startAnchors:glutils.WebGLElementQuery<networkcube.Link,THREE.Mesh>;\nvar endAnchors:glutils.WebGLElementQuery<networkcube.Link,THREE.Mesh>;\nvar arcs:glutils.WebGLElementQuery<networkcube.Link,THREE.Mesh>;\nvar tickTimes = []\n\n// STATES\nvar isShownNoneEgoLinks = true;\nvar yearOffset = 0\nvar timeStartId = times[0].id();\nvar timeEndId = times[times.length-1].id();\nvar nodesScrollStart = 0;\nvar cell_width = 13\nvar granualarity = dgraph.getMinGranularity();\nvar globalNodeOrder = nodes.slice(0);\nvar currentNodeOrder=[]\nfor(var i=0 ; i<globalNodeOrder.length ; i++){\n    currentNodeOrder.push(i);\n}\n\n// VIS FUNCTIONS\nvar lineFunction = d3.svg.line()\n    .x((d)=>{ return d.x; })\n    .y((d)=>{ return d.y; })\n    .interpolate(\"basis\");\n\n\n// UI SETUP\n\n\nvar height = nodes.length * ROW_HEIGHT + 150;\n$('#visDiv').append('<svg id=\"visSvg\"><foreignObject id=\"visCanvasFO\"></foreignObject></svg>');\n// $('#visCanvasFO').append(canvas);\nd3.select('#visCanvasFO')\n    .attr('x', TABLE_LEFT)\n    .attr('y', TABLE_TOP)\n    .attr('width', WIDTH)\n    .attr('height', height)\n    \n    \n/////////////\n/// WEBGL ///\n/////////////\n\nvar vertexShaderProgram = \"attribute vec4 customColor;varying vec4 vColor;void main() {vColor = customColor;gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1 );}\";\nvar fragmentShaderProgram = \"varying vec4 vColor;void main() {gl_FragColor = vec4(vColor[0], vColor[1], vColor[2], vColor[3]);}\";\n\nvar webgl = glutils.initWebGL('visCanvasFO', WIDTH, height);\nwebgl.camera.position.x = WIDTH/2;\nwebgl.camera.position.y = -height/2;\nwebgl.camera.position.z = 1000;\n\n\n// VERTICAL SCROLL EVENT\nwindow.addEventListener(\"mousewheel\", mouseWheelHandler, false);\n\n$('#menu').append('\\\n            <select id=\"labelOrdering\" onchange=\"updateGlobalOrder()\">\\\n                <option value=\"data\">As appear in table</option>\\\n                <option value=\"alphanumerical\">Alphanumerical</option>\\\n                <option value=\"degree\">Number of connections</option>\\\n            </select>\\\n            '); \n\nvar timeSlider:TimeSlider = new TimeSlider(dgraph, WIDTH-100-TABLE_LEFT);\n\n// init webgl raycaster\nthis.visualize();\n\nfunction visualize(){\n    \n    // SET UP GLOBAL PARAMETERS\n    cell_width = (WIDTH-TABLE_LEFT-TABLE_RIGHT) / times.length;\n    nodeYPosFunction.domain([0,nodes.length-1])\n        .range([ROW_HEIGHT, ROW_HEIGHT*nodes.length])\n\n    timeXFunction.domain([0,times.length-1])\n        .range([cell_width, times.length*cell_width])\n    linkTypeOffset.domain([-1,linkTypes.length]);\n    \n    \n    // create svg\n    // for timeslider and labels only\n    svg = d3.select('#visSvg')\n        .attr('width', WIDTH)\n        .attr('height', ROW_HEIGHT*nodes.length + 200)\n    timeSlider.appendTo(svg, TABLE_LEFT);\n\n\n    createNodes()\n    createTimes()\n    createLinks()\n\n    webgl.render();\n}\n\n\nfunction createNodes(){   \n\n    // DRAW NODES\n    row = svg.selectAll('.nodeLabel')\n        .data(nodes)\n        .enter()\n        .append('text')\n            .attr('x', TABLE_LEFT)\n            .attr('y', (d)=>TABLE_TOP+nodeYPosFunction(currentNodeOrder[d.id()]) + ROW_HEIGHT)\n            .text((d)=>{return d.label() + ' ('+d.neighbors().size()+')';})\n            .attr('class', 'nodeLabel')\n            .style('font-weight', NODE_LABEL_WEIGHT)\n            .style('fill', NODE_LABEL_COLOR)\n            .on('mouseover', (d, i) => {\n                networkcube.highlight('set', <networkcube.ElementCompound>{ nodes: [d] });\n            })\n            .on('mouseout', (d, i) => {\n                networkcube.highlight('reset');\n            })\n            .on('click', (d, i) => {\n                showEgoNetwork(d)\n                    \n                // var selections = d.getSelections();\n                // var currentSelection = this.dgraph.getCurrentSelection();\n                // for (var j = 0; j < selections.length; j++) {\n                //     if (selections[j] == currentSelection) {\n                //         networkcube.selection('remove', <networkcube.ElementCompound>{ nodes: [d] });\n                //         return;\n                //     }\n                // }\n                // networkcube.selection('add', <networkcube.ElementCompound>{ nodes: [d] });\n            }); \n\n    \n    // draw row bars\n    glutils.selectAll()\n        .data(nodes)\n        .filter((d,i)=> i%2==0)\n        .append('rect')\n        .attr('x', 5)\n        .attr('y', (d)=>-nodeYPosFunction(currentNodeOrder[d.id()]))\n        .attr('width', WIDTH-TABLE_LEFT-TABLE_RIGHT)\n        .attr('height', ROW_HEIGHT)\n        .style('fill', (d,i)=>i%3==2?0xdddddd:0xeeeeee)\n\n}\n\nfunction createTimes(){\n\n    // TIME LABELS\n    svg.selectAll('.timeLabel')\n        .data(times)\n        .enter()\n        .append('text')\n            .attr('transform', (d,i)=>{\n                return 'translate('+(TABLE_LEFT+this.timeXFunction(i))+', '+(TABLE_TOP) +')rotate(-90)';\n            })\n            .text((d:networkcube.Time)=>{\n                return networkcube.formatAtGranularity(d.time(), 7) + '-' + networkcube.formatAtGranularity(d.time(), 6);\n            })\n            .attr('class', 'timeLabel')\n            .style('font-weight', NODE_LABEL_WEIGHT)\n            .style('fill', NODE_LABEL_COLOR)\n            .on('mouseover', (d, i) => {\n                networkcube.highlight('set', <networkcube.ElementCompound>{ times: [d] });\n            })\n            .on('mouseout', (d, i) => {\n                networkcube.highlight('reset');\n            })\n            .on('click', (d, i) => {\n                var selections = d.getSelections();\n                var currentSelection = this.dgraph.getCurrentSelection();\n                for (var j = 0; j < selections.length; j++) {\n                    if (selections[j] == currentSelection) {\n                        networkcube.selection('remove', <networkcube.ElementCompound>{ times: [d] });\n                        return;\n                    }\n                }\n                networkcube.selection('add', <networkcube.ElementCompound>{ times: [d] });\n            });  \n     \n     updateTimeGranularity();\n    \n}\n\nfunction createLinks(){ \n        \n        var l:networkcube.Link;\n        var geometry;\n        var material\n        var c, curve;\n        var points;\n        var x, y1, y2;\n        var p;\n        var splineObject;\n        var yOffset;\n        \n        // CREATE ANCHORS\n        startAnchors = glutils.selectAll().data(links);\n        startAnchors.append('circle')\n            .attr('x', (l,i)=>this.timeXFunction(l.times().toArray()[0].id()))\n            .attr('y', (l,i)=>{\n                y1 = this.nodeYPosFunction(currentNodeOrder[l.source.id()]);\n                yOffset = linkTypeOffset(this.linkTypes.indexOf(l.linkType()));\n                return  -(y1 + yOffset)-ANCHOR_START_DIAMETER/2;\n            })\n            .attr('r', ANCHOR_START_DIAMETER)\n            .style('fill', (l)=>l.getSelections()[0].color)\n            .on('mouseover', (d, i) => {\n                networkcube.highlight('set', <networkcube.ElementCompound>{ links: [d] });\n            })\n            .on('mouseout', (d, i) => {\n                networkcube.highlight('reset');\n            })\n        // CREATE ANCHORS\n        endAnchors = glutils.selectAll().data(links);\n        endAnchors.append('circle')\n            .attr('x', (l,i)=>this.timeXFunction(l.times().toArray()[0].id()))\n            .attr('y', (l,i)=>{\n                y2 = this.nodeYPosFunction(currentNodeOrder[l.target.id()]);\n                yOffset = linkTypeOffset(this.linkTypes.indexOf(l.linkType()));\n                return  -(y2 + yOffset)+ANCHOR_END_DIAMETER/2;\n            })\n            .attr('r', ANCHOR_END_DIAMETER)\n            .style('fill', (l)=>l.getSelections()[0].color)\n            .on('mouseover', (d, i) => {\n                networkcube.highlight('set', <networkcube.ElementCompound>{ links: [d] });\n            })\n            .on('mouseout', (d, i) => {\n                networkcube.highlight('reset');\n            })\n \n         // CREATE ARCS\n         arcs = glutils.selectAll()\n            .data(links)\n            .append('path')\n            .attr('d', (l)=>makeArcPath(l))\n            .attr('x', (l,i)=>this.timeXFunction(l.times().toArray()[0].id()))\n            .attr('y', (l,i)=>-linkTypeOffset(this.linkTypes.indexOf(l.linkType())))\n            .attr('z', 1)\n            .style('stroke', (l)=> l.getSelections()[0].color)\n            .style('stroke-width', 1)\n            .style('opacity', .3)\n            .on('mouseover', (d, i) => {\n                networkcube.highlight('set', <networkcube.ElementCompound>{ links: [d] });\n            })\n            .on('mouseout', (d, i) => {\n                networkcube.highlight('reset');\n            })\n    }\n\n\n// UPDATES\n\nfunction timeRangeHandler(m:networkcube.TimeRangeMessage){    // start:networkcube.Time, end:networkcube.Time, single:networkcube.Time){\n    \n    var start = dgraph.time(m.startId)\n    var end = dgraph.time(m.endId)\n    var single = dgraph.time(m.singleId)\n\n    timeSlider.set(start, end);\n\n    // update timeXFunction\n    cell_width = (WIDTH - TABLE_LEFT - TABLE_RIGHT)/(end.id() - start.id())\n    timeXFunction\n        .domain([start.id(), end.id()])\n        .range([cell_width, times.length*cell_width])\n        \n    timeStartId = start.id();\n    timeEndId = end.id();\n    \n    // update link positions\n    arcs   \n        .attr('x', (l,i)=>timeXFunction(l.times().toArray()[0].id()))\n        .style('opacity', (l,i)=>timeXFunction(l.times().toArray()[0].id())<5?0:1)\n\n    startAnchors   \n        .attr('x', (l,i)=>timeXFunction(l.times().toArray()[0].id()))\n        .style('opacity', (l,i)=>timeXFunction(l.times().toArray()[0].id())<5?0:1)\n\n   endAnchors   \n        .attr('x', (l,i)=>timeXFunction(l.times().toArray()[0].id()))\n        .style('opacity', (l,i)=>timeXFunction(l.times().toArray()[0].id())<5?0:1)\n    \n    // update time positions and visibility\n    \n    d3.selectAll('.timeLabel')\n        .attr('transform', (d)=> 'translate('+(TABLE_LEFT+timeXFunction(d.id()))+', '+(TABLE_TOP) +')rotate(-90)')\n        .style('opacity', (d)=> timeXFunction(d.id())<0?0:1)\n    \n    // need to change granularity? \n    // var num_ticks = Math.floor((WIDTH-TABLE_LEFT-TABLE_RIGHT) / cell_width);\n    \n    \n    updateTimeGranularity()\n\n    webgl.render();\n}\n\nfunction updateTimeGranularity(){\n    \n    tickTimes = dgraph.times().toArray();\n    granualarity = dgraph.getMinGranularity();\n    var tick_width = cell_width\n    var allWidth = tickTimes.length * tick_width; \n    while (\n        tickTimes.length > 0 \n        && granualarity <= dgraph.getMaxGranularity()\n        && tick_width < TIME_TICK_GAP_MAX) {\n        granualarity++;\n        tickTimes = [];\n        var curr_t = times[0].time();\n        var id = 1;\n        var count = 0\n        var d\n        while (id < times.length) {\n            if (granualarity == 1) {\n                if (times[id].time().second() != curr_t.second()) {\n                    curr_t = times[id].time();\n                    tickTimes.push(times[id])\n                }\n            } else if (granualarity == 2) {\n                if (times[id].time().minute() != curr_t.minute()) {\n                    curr_t = times[id].time();\n                    tickTimes.push(times[id])\n                }\n            } else if (granualarity == 3) {\n                if (times[id].time().hour() != curr_t.hour()) {\n                    curr_t = times[id].time();\n                    tickTimes.push(times[id])\n                }\n            } else if (granualarity == 4) {\n                if (times[id].time().day() != curr_t.day()) {\n                    curr_t = times[id].time();\n                    tickTimes.push(times[id])\n                }\n            } else if (granualarity == 5) {\n                if (times[id].time().week() != curr_t.week()) {\n                    curr_t = times[id].time();\n                    tickTimes.push(times[id])\n                }\n            } else if (granualarity == 6) {\n                if (times[id].time().month() != curr_t.month()) {\n                    curr_t = times[id].time();\n                    tickTimes.push(times[id])\n                }\n            } else if (granualarity == 7) {\n                if (times[id].time().year() != curr_t.year()) {\n                    curr_t = times[id].time();\n                    tickTimes.push(times[id])\n                }\n            }\n            id++;\n        }\n        tick_width = allWidth / tickTimes.length;\n        \n    }    \n   \n    updateTimes(); \n}\n\nfunction updateEventHandler(m:networkcube.Message){\n    if(m.type == networkcube.MESSAGE_SELECTION_FILTER){\n        updateCurrentOrder();\n        return;\n    }else{        \n        updateLinks();\n        updateNodes();\n        updateTimes();\n        webgl.render();\n    }\n\n}\n\nfunction updateCurrentOrder(){\n    currentNodeOrder = []\n    for(var i=0 ; i <this.nodes.length ; i++){\n        currentNodeOrder.push(-1);    \n    }\n    var rank=0\n    var n;\n    for(var i=0 ; i <globalNodeOrder.length ; i++){\n        console.log('rank', rank)\n        if(globalNodeOrder[i].isVisible()){\n            console.log('\\trank', rank)\n            currentNodeOrder[globalNodeOrder[i].id()] = rank\n            rank++;\n        }\n    }\n    console.log('currentNodeOrder', currentNodeOrder)\n \n    nodeYPosFunction.domain([0, rank])\n        .range([ROW_HEIGHT, ROW_HEIGHT*(rank - nodesScrollStart)])\n\n \n    updateNodePositions(1000);\n    updateLinkPositions();\n    webgl.render();\n}\n\nfunction updateLinks(){\n    \n    arcs\n        .style('stroke-width', (d)=>\n            d.isHighlighted() \n            || d.source.isHighlighted() \n            || d.target.isHighlighted()\n            || d.times().highlighted().size() > 0\n            ?2:1)\n        .style('opacity', (d:networkcube.Link)=>\n            !d.isVisible()\n            || nodes.indexOf(d.source) == -1 \n            || nodes.indexOf(d.target) == -1?0:\n            d.isHighlighted() \n            || d.source.isHighlighted() \n            || d.target.isHighlighted()\n            || d.times().highlighted().size() > 0\n            ?1:.5)\n        .style('stroke', (d:networkcube.Link)=>d.getSelections()[0].showColor?d.getSelections()[0].color:'#999')\n    endAnchors\n        .attr('r', (d)=>\n            d.isHighlighted() \n            || d.source.isHighlighted()  \n            || d.target.isHighlighted()\n            || d.times().highlighted().size() > 0\n            ?LINK_ANCHOR_RADIUS+1:LINK_ANCHOR_RADIUS)\n        .style('opacity', (d:networkcube.Link)=>\n            !d.isVisible()\n            || nodes.indexOf(d.source) == -1 \n            || nodes.indexOf(d.target) == -1?0:\n            d.isHighlighted() \n            || d.source.isHighlighted() \n            || d.target.isHighlighted()\n            || d.times().highlighted().size() > 0\n            ?1:.5)\n        .style('fill', (d:networkcube.Link)=>d.getSelections()[0].showColor?d.getSelections()[0].color:'#999')\n    startAnchors\n        .style('opacity', (d:networkcube.Link)=>\n            !d.isVisible()\n            || nodes.indexOf(d.source) == -1 \n            || nodes.indexOf(d.target) == -1?0:\n            d.isHighlighted() \n            || d.source.isHighlighted() \n            || d.target.isHighlighted()\n            || d.times().highlighted().size() > 0\n            ?1:.5)\n        .style('fill', (d:networkcube.Link)=>d.getSelections()[0].showColor?d.getSelections()[0].color:'#999')\n}\n\nfunction updateNodes()\n{\n    d3.selectAll('.nodeLabel')\n        .style('font-weight', (d)=>d.isHighlighted() || d.links().highlighted().size()>0 || d.neighbors().highlighted().size()>0 ?900:NODE_LABEL_WEIGHT)\n        .style('text-decoration', (d)=>d.isHighlighted()?'underline':'none')\n        .style('fill', (d:networkcube.Node)=>{\n            var color = undefined;\n            if (d.isSelected()) {\n                color = networkcube.getPriorityColor(d);\n            }\n            if (!color)\n                color = NODE_LABEL_COLOR;\n            return color;\n        })\n        .style('opacity', (n)=>currentNodeOrder[n.id()]>=nodesScrollStart?1:0)\n        .text((n)=>egoNode==n?'EGO-->' + n.label()+' ('+n.neighbors().size() + ')': n.label()+' ('+n.neighbors().size() + ')')\n}\n\nfunction updateNodePositions(duration:number){\n    d3.selectAll('.nodeLabel')\n        .transition().duration(duration)\n        .attr('y', (d)=>TABLE_TOP+nodeYPosFunction(currentNodeOrder[d.id()]) + ROW_HEIGHT)\n        // .attr('y', (d)=> TABLE_TOP+nodeYPosFunction(currentNodeOrder[d.id()]))\n        .style('opacity', (n)=>currentNodeOrder[n.id()]>=nodesScrollStart?1:0)\n}\nfunction updateLinkPositions(){\n    var y1,y2, yOffset, points;\n    startAnchors\n        .attr('y', (l,i)=>{\n            y1 = this.nodeYPosFunction(currentNodeOrder[l.source.id()]);\n            yOffset = linkTypeOffset(this.linkTypes.indexOf(l.linkType()));\n            return  -(y1 + yOffset)-ANCHOR_START_DIAMETER/2;\n        })\n    endAnchors\n        .attr('y', (l,i)=>{\n            y2 = this.nodeYPosFunction(currentNodeOrder[l.target.id()]);\n            yOffset = linkTypeOffset(this.linkTypes.indexOf(l.linkType()));\n            return  -(y2 + yOffset)+ANCHOR_END_DIAMETER/2;\n        })\n     arcs\n        .attr('d', (l)=>makeArcPath(l))     \n        // .attr('y', (l,i)=>-linkTypeOffset(this.linkTypes.indexOf(l.linkType())))\n}\n\n\n\nfunction updateTimes(){\n\n    d3.selectAll('.timeLabel')\n        .style('font-weight', (d)=>\n            d.isHighlighted() \n            || d.links().highlighted().size() \n            || d.links().sources().highlighted().size() > 0  \n            || d.links().targets().highlighted().size() > 0  \n            ?900:NODE_LABEL_WEIGHT)\n        .style('text-decoration', (d)=>\n            d.isHighlighted()\n            || d.links().highlighted().size() > 0 \n            ?'underline':'none')\n        .style('fill', (d)=>d.isHighlighted()\n            || d.links().highlighted().size() > 0 \n            ?'#000':NODE_LABEL_COLOR)\n        .style('opacity', (d)=>\n            d.id()>=timeStartId\n            &&\n            (d.links().highlighted().size() > 0 \n            || tickTimes.indexOf(d) > -1\n            )?1:0\n        )\n}\n\n\n\nfunction mouseWheelHandler(event){\n    event.preventDefault();\n\n    if(nodesScrollStart >= nodes.length-1 && event.wheelDelta < 0\n    || nodesScrollStart <= 0 && event.wheelDelta > 0){\n        return;\n    }\n\n    var dir = event.wheelDelta>0?-1:1;\n    nodesScrollStart += SCROLL_CHUNK * dir\n    nodeYPosFunction.domain([nodesScrollStart, nodes.length-1])\n        .range([ROW_HEIGHT, ROW_HEIGHT*(nodes.length - nodesScrollStart)])\n\n    webgl.camera.position.y += -ROW_HEIGHT * dir * SCROLL_CHUNK;\n    webgl.camera.updateProjectionMatrix();\n    \n\n    updateNodePositions(0);    \n    updateNodes();\n    webgl.render();\n}\n\n\n\n\n\n/// HELPER\n\n\nfunction updateGlobalOrder(validNodes?:networkcube.Node[])\n{\n        if(validNodes == undefined)\n            globalNodeOrder = dgraph.nodes().toArray();\n        else\n            globalNodeOrder = validNodes;\n            \n\n        var menu = document.getElementById('labelOrdering');\n        LABEL_ORDER = menu.options[menu.selectedIndex].value;\n        if(LABEL_ORDER == 'alphanumerical'){\n            globalNodeOrder.sort(compareFunc);\n        }else if(LABEL_ORDER == 'data'){\n        }else if(LABEL_ORDER == 'degree'){\n            globalNodeOrder.sort(function(a,b){\n                return b.neighbors().length - a.neighbors().length})\n        }else if(LABEL_ORDER == 'similarity'){\n            var config: networkcube.OrderingConfiguration = new networkcube.OrderingConfiguration();\n            config.start = times[0];\n            config.end = times[times.length-1];\n            config.nodes = globalNodeOrder\n            config.links = dgraph.links().presentIn(config.start, config.end).visible().toArray();\n            var nodeOrder = networkcube.orderNodes(dgraph, config);\n            globalNodeOrder = []\n            for(var i=0 ; i<nodeOrder.length ; i++){\n                globalNodeOrder.push(dgraph.node(nodeOrder[i]));\n            }\n        }\n        console.log('globalNodeOrder', globalNodeOrder)\n        updateCurrentOrder();\n}\n\nfunction compareFunc(a,b) {\n    return a.label() < b.label()?-1:1;\n}\n    \nfunction makeArcPath(link:networkcube.Link):Object[]{\n    var y1p = nodeYPosFunction(currentNodeOrder[link.source.id()]);\n    var y2p = nodeYPosFunction(currentNodeOrder[link.target.id()]);\n    var y1 = Math.min(y1p,y2p)\n    var y2 = Math.max(y2p,y1p)\n    var points = [];\n    points.push({x: 0, y:-y1})\n    points.push({x: 0+Math.abs(y1-y2)/5, y:-(y1 + (y2-y1)/6)})\n    points.push({x: 0+Math.abs(y1-y2)/5, y:-(y2 - (y2-y1)/6)})\n    points.push({x: 0, y:-y2})\n    \n    var vectors = []\n    for(var i=0 ; i < points.length ; i++){\n        vectors.push(new THREE.Vector2(points[i].x, points[i].y))\n    }\n    return glutils.curve(points);\n}\n\n\nvar egoNode;\nfunction showEgoNetwork(n:networkcube.Node){\n    if(egoNode == n){\n        egoNode = undefined;\n        updateGlobalOrder()\n        \n    }else{\n        egoNode = n;\n        var a = egoNode.neighbors().removeDuplicates().toArray()\n        if(a.indexOf(egoNode) == -1)\n            a.push(egoNode);\n        updateGlobalOrder(a)        \n        \n    }\n}\n\n"],"sourceRoot":"/source/"}